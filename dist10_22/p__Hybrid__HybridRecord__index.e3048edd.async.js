"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[800],{58638:function(H,E,r){r.d(E,{Z:function(){return b}});var P=r(1413),y=r(67294),M={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM770.87 199.13l-52.2-52.2a8.01 8.01 0 014.7-13.6l179.4-21c5.1-.6 9.5 3.7 8.9 8.9l-21 179.4c-.8 6.6-8.9 9.4-13.6 4.7l-52.4-52.4-256.2 256.2a8.03 8.03 0 01-11.3 0l-42.4-42.4a8.03 8.03 0 010-11.3l256.1-256.3z"}}]},name:"export",theme:"outlined"},f=M,O=r(91146),x=function(i,C){return y.createElement(O.Z,(0,P.Z)((0,P.Z)({},i),{},{ref:C,icon:f}))},j=y.forwardRef(x),b=j},65538:function(H,E,r){r.r(E);var P=r(19632),y=r.n(P),M=r(15009),f=r.n(M),O=r(97857),x=r.n(O),j=r(99289),b=r.n(j),F=r(5574),i=r.n(F),C=r(6110),V=r(29966),h=r(2453),T=r(83622),G=r(17788),$=r(78367),L=r(57546),J=r(58638),u=r(67294),Q=r(76772),X=r(27484),g=r.n(X),a=r(85893),q=function(){var ee=(0,u.useState)([]),U=i()(ee,2),s=U[0],A=U[1],re=(0,u.useState)([]),w=i()(re,2),ae=w[0],D=w[1],W=(0,Q.useLocation)(),_=(0,u.useMemo)(function(){return new URLSearchParams(W.search).get("sowingNumber")},[W.search]),te=(0,u.useState)(!1),K=i()(te,2),le=K[0],B=K[1],ne=(0,u.useState)(!1),Z=i()(ne,2),I=Z[0],N=Z[1],k=localStorage.getItem("token"),z=function(){var l=b()(f()().mark(function n(){var o,d,t;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/api/seed/getHybridization",{headers:{Authorization:"Bearer ".concat(k)}});case 3:if(o=e.sent,o.ok){e.next=6;break}throw new Error("\u7F51\u7EDC\u9519\u8BEF");case 6:return e.next=8,o.json();case 8:d=e.sent,Array.isArray(d.data)?(t=d.data.map(function(c,p){return x()(x()({},c),{},{key:c.key||c.id||c.sowingNumber||c.hybridNumber+"_"+p})}),A(t)):A([]),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(0),console.error("\u83B7\u53D6\u6742\u4EA4\u8BB0\u5F55\u5931\u8D25:",e.t0),h.ZP.error("\u83B7\u53D6\u6742\u4EA4\u8BB0\u5F55\u5931\u8D25"),A([]);case 17:case"end":return e.stop()}},n,null,[[0,12]])}));return function(){return l.apply(this,arguments)}}();(0,u.useEffect)(function(){z()},[]),(0,u.useEffect)(function(){D(_?s.filter(function(l){return String(l.sowingNumber)===String(_)}):s)},[s,_]);var oe=function(n,o){var d=s,t=o.createTimeRange;if(t&&Array.isArray(t)){var m=i()(t,2),e=m[0],c=m[1];d=d.filter(function(p){var v=g()(p.copyingTime);return v.isAfter(g()(e).subtract(1,"second"))&&v.isBefore(g()(c).add(1,"second"))})}Object.entries(o).forEach(function(p){var v=i()(p,2),S=v[0],Y=v[1];Y&&(S==="createTime"||S==="createTimeRange"||(d=d.filter(function(ue){var R;return((R=ue[S])!==null&&R!==void 0?R:"").toString().includes(Y)})))}),_&&(d=d.filter(function(p){return String(p.sowingNumber)===String(_)})),D(d)},de=function(){var l=b()(f()().mark(function n(o){var d,t;return f()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N(!0),e.prev=1,e.next=4,fetch("/api/seed/Hybridizationimport",{method:"POST",headers:{Authorization:"Bearer ".concat(k)},body:o});case 4:if(d=e.sent,d.ok){e.next=7;break}throw new Error("\u5BFC\u5165\u5931\u8D25");case 7:return e.next=9,d.json();case 9:t=e.sent,t.msg||t.code===200?(h.ZP.success("\u5BFC\u5165\u6210\u529F"),B(!1),z()):h.ZP.error(t.message||"\u5BFC\u5165\u5931\u8D25"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.error("\u5BFC\u5165\u5931\u8D25:",e.t0),h.ZP.error("\u5BFC\u5165\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u6587\u4EF6\u683C\u5F0F");case 17:return e.prev=17,N(!1),e.finish(17);case 20:case"end":return e.stop()}},n,null,[[1,13,17,20]])}));return function(o){return l.apply(this,arguments)}}(),ie=function(){if(s.length===0){h.ZP.warning("\u6682\u65E0\u6742\u4EA4\u8BB0\u5F55");return}var n=["\u64AD\u79CD\u7F16\u53F7","\u6742\u4EA4\u7F16\u53F7","\u6BCD\u672C\u7F16\u53F7","\u7236\u672C\u7F16\u53F7","\u6BCD\u672C\u540D\u79F0","\u7236\u672C\u540D\u79F0","\u54C1\u79CD\u7C7B\u578B","\u5BF9\u7167\u54C1\u79CD","\u8BA1\u5212","\u957F\u52BF\u8BC4\u5206","\u5750\u679C\u80FD\u529B","\u67AF\u840E\u8BC4\u5206","\u767D\u7C89\u75C5","\u679C\u578B","\u76AE\u8272","\u8089\u8272","\u5916\u89C2\u8BC4\u5206","\u63A7\u68A2\u65F6\u95F4","\u719F\u6027\u8BC4\u5206","\u8D28\u5730","\u98CE\u5473","\u662F\u5426\u96BE\u9009","\u8089\u539A\u8BC4\u5206","\u7CD6\u5EA6","\u6302\u679C\u671F","\u5E73\u5747\u5355\u74DC\u91CD","\u603B\u4EA7\u91CF","\u4E2D\u5FC3\u7CD6\u5EA6","\u539F\u5730","\u98CE\u5473","\u53E3\u611F\u8BC4\u5206","\u662F\u5426\u53D1\u7C98","\u8010\u8D2E","\u6302\u679C\u671F","\u5E73\u5747\u5355\u74DC\u91CD"],o=[n.join(",")].concat(y()(s.map(function(e){return[e.sowingNumber,e.hybridizationNumber,e.femaleNumber,e.maleNumber,e.femaleName,e.maleName,e.type,e.controlVarieties,e.mating,e.growthScore,e.fruitAbility,e.pistilScore,e.powderyMildew,e.fruitShape,e.skinColor,e.flesh,e.appearanceScoring,e.copyingTime,e.cookabilityScore,e.texture,e.flavor,e.whetherPick,e.thickScore,e.sugar,e.singleWeight,e.outPut,e.centralSugar,e.tasteScore,e.hangingPeriod,e.averageWeight,e.averageSugar].join(",")}))).join(`
`),d=new Blob(["\uFEFF"+o],{type:"text/csv;charset=utf-8;"}),t=document.createElement("a"),m=URL.createObjectURL(d);t.setAttribute("href",m),t.setAttribute("download","\u6742\u4EA4\u8BB0\u5F55_".concat(g()().format("YYYY-MM-DD_HH-mm-ss"),".csv")),t.style.visibility="hidden",document.body.appendChild(t),t.click(),document.body.removeChild(t),h.ZP.success("\u5BFC\u51FA\u6210\u529F")},se=[{title:"\u64AD\u79CD\u7F16\u53F7",dataIndex:"sowingNumber",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u64AD\u79CD\u7F16\u53F7"}},{title:"\u6742\u4EA4\u7F16\u53F7",dataIndex:"hybridizationNumber",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u6742\u4EA4\u7F16\u53F7"}},{title:"\u6BCD\u672C\u7F16\u53F7",dataIndex:"femaleNumber",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u6BCD\u672C\u7F16\u53F7"}},{title:"\u7236\u672C\u7F16\u53F7",dataIndex:"maleNumber",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u7236\u672C\u7F16\u53F7"}},{title:"\u6BCD\u672C\u540D\u79F0",dataIndex:"femaleName",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u6BCD\u672C\u540D\u79F0"}},{title:"\u7236\u672C\u540D\u79F0",dataIndex:"maleName",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u7236\u672C\u540D\u79F0"}},{title:"\u54C1\u79CD\u7C7B\u578B",dataIndex:"type",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u54C1\u79CD\u7C7B\u578B"}},{title:"\u5BF9\u7167\u54C1\u79CD",dataIndex:"controlVarieties",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5BF9\u7167\u54C1\u79CD"}},{title:"\u8BA1\u5212",dataIndex:"mating",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u8BA1\u5212"}},{title:"\u957F\u52BF\u8BC4\u5206",dataIndex:"growthScore",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u957F\u52BF\u8BC4\u5206"}},{title:"\u5750\u679C\u80FD\u529B",dataIndex:"fruitAbility",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5750\u679C\u80FD\u529B"}},{title:"\u67AF\u840E\u8BC4\u5206",dataIndex:"blightScore",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u67AF\u840E\u8BC4\u5206"}},{title:"\u767D\u7C89\u75C5",dataIndex:"powderyMildew",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u767D\u7C89\u75C5"}},{title:"\u679C\u578B",dataIndex:"fruitShape",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u679C\u578B"}},{title:"\u76AE\u8272",dataIndex:"skinColor",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u76AE\u8272"}},{title:"\u8089\u8272",dataIndex:"flesh",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u8089\u8272"}},{title:"\u5916\u89C2\u8BC4\u5206",dataIndex:"appearanceScoring",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5916\u89C2\u8BC4\u5206"}},{title:"\u8003\u79CD\u65F6\u95F4",dataIndex:"copyingTime",valueType:"dateTimeRange",render:function(n,o){return o.copyingTime?g()(o.copyingTime).format("YYYY-MM-DD"):"-"},fieldProps:{placeholder:"\u8BF7\u9009\u62E9\u8003\u79CD\u65F6\u95F4"},search:{transform:function(n){return{createTimeRange:n}}}},{title:"\u719F\u6027\u8BC4\u5206",dataIndex:"cookabilityScore",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u719F\u6027\u8BC4\u5206"}},{title:"\u8D28\u5730",dataIndex:"texture",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u8D28\u5730"}},{title:"\u98CE\u5473",dataIndex:"flavor",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u98CE\u5473"}},{title:"\u662F\u5426\u6311\u9009",dataIndex:"whetherPick",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u662F\u5426\u96BE\u9009"}},{title:"\u8089\u539A\u8BC4\u5206",dataIndex:"thickScore",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u8089\u539A\u8BC4\u5206"}},{title:"\u5355\u74DC\u91CD",dataIndex:"singleWeight",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5355\u74DC\u91CD"}},{title:"\u603B\u4EA7\u91CF",dataIndex:"outPut",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u603B\u4EA7\u91CF"}},{title:"\u4E2D\u5FC3\u7CD6\u5EA6",dataIndex:"centralSugar",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u4E2D\u5FC3\u7CD6\u5EA6"}},{title:"\u53E3\u611F\u8BC4\u5206",dataIndex:"tasteScore",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u53E3\u611F\u8BC4\u5206"}},{title:"\u7CD6\u5EA6",dataIndex:"sugar",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u7CD6\u5EA6"}},{title:"\u6302\u679C\u671F",dataIndex:"hangingPeriod",valueType:"text",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u6302\u679C\u671F"}},{title:"\u5E73\u5747\u5355\u74DC\u91CD",dataIndex:"averageWeight",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5E73\u5747\u5355\u74DC\u91CD"}},{title:"\u5E73\u5747\u7CD6\u5EA6",dataIndex:"averageSugar",valueType:"digit",fieldProps:{placeholder:"\u8BF7\u8F93\u5165\u5E73\u5747\u7CD6\u5EA6"}}];return(0,a.jsxs)(C._z,{header:{title:"\u6742\u4EA4\u8003\u79CD\u8BB0\u5F55"},children:[!_&&(0,a.jsxs)("div",{style:{marginBottom:16},children:[(0,a.jsx)(T.ZP,{type:"primary",icon:(0,a.jsx)(L.Z,{}),onClick:function(){return B(!0)},style:{marginRight:8},children:"\u5BFC\u5165Excel"}),(0,a.jsx)(T.ZP,{type:"primary",icon:(0,a.jsx)(J.Z,{}),onClick:ie,disabled:s.length===0,children:"\u5BFC\u51FA"})]}),(0,a.jsx)(V.Z,{rowKey:"key",columns:se,dataSource:ae,onReset:function(){return D(s)},search:_?!1:{labelWidth:90,defaultCollapsed:!0,collapseRender:function(n){return n?"\u5C55\u5F00 \u2228":"\u6536\u8D77 \u2227"},filterType:"query"},form:{syncToUrl:!1,onValuesChange:oe},pagination:{showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],defaultPageSize:10,showTotal:function(n){return"\u5171 ".concat(n," \u6761\u8BB0\u5F55")}},toolBarRender:!1,scroll:{x:3e3}}),(0,a.jsxs)(G.Z,{title:(0,a.jsx)("div",{style:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px",margin:"-20px -24px 20px"},children:(0,a.jsx)("span",{style:{fontSize:"18px",fontWeight:500},children:"\u5BFC\u5165Excel"})}),open:le,onOk:function(){B(!1)},onCancel:function(){B(!1)},confirmLoading:I,width:600,styles:{body:{padding:"24px"}},children:[(0,a.jsx)("div",{style:{background:"#fafafa",padding:"24px",borderRadius:"8px",marginBottom:"24px"},children:(0,a.jsx)($.Z,{accept:".xlsx,.xls",showUploadList:!1,beforeUpload:function(n){var o=new FormData;return o.append("file",n),de(o),!1},children:(0,a.jsx)(T.ZP,{icon:(0,a.jsx)(L.Z,{}),loading:I,disabled:I,children:I?"\u4E0A\u4F20\u4E2D...":"\u5BFC\u5165Excel"})})}),(0,a.jsxs)("div",{style:{background:"#f6ffed",padding:"16px",borderRadius:"8px",border:"1px solid #b7eb8f"},children:[(0,a.jsx)("h4",{style:{color:"#52c41a",marginTop:0},children:"\u6CE8\u610F\u4E8B\u9879\uFF1A"}),(0,a.jsxs)("ul",{style:{color:"#666",marginBottom:0},children:[(0,a.jsx)("li",{children:"\u8BF7\u4F7F\u7528\u6807\u51C6Excel\u6A21\u677F\u8FDB\u884C\u5BFC\u5165"}),(0,a.jsx)("li",{children:"Excel\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC710MB"}),(0,a.jsx)("li",{children:"\u8868\u683C\u4E2D\u7684\u5FC5\u586B\u5B57\u6BB5\u4E0D\u80FD\u4E3A\u7A7A"}),(0,a.jsx)("li",{children:"\u65E5\u671F\u683C\u5F0F\u8BF7\u4F7F\u7528YYYY-MM-DD\u683C\u5F0F"})]})]}),(0,a.jsx)("div",{style:{marginTop:16,textAlign:"right"},children:(0,a.jsx)(T.ZP,{type:"primary",onClick:function(){window.open("https://breed-1258140596.cos.ap-shanghai.myqcloud.com/Breeding%20Platform/2025S%E6%9D%82%E4%BA%A4%E6%80%A7%E7%8A%B6%E8%A1%A8.xlsx")},children:"\u4E0B\u8F7DExcel\u6A21\u677F"})})]})]})};E.default=q}}]);
