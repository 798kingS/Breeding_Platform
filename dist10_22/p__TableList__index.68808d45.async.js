"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[325],{89938:function(La,Se,f){f.r(Se),f.d(Se,{default:function(){return Tr}});var dr=f(13769),cr=f.n(dr),mr=f(97857),B=f.n(mr),pr=f(19632),q=f.n(pr),hr=f(5574),b=f.n(hr),fr=f(15009),h=f.n(fr),gr=f(99289),x=f.n(gr),Fe=f(27196),je=f(58638),vr=f(34804),yr=f(64029),we=f(57546),br=f(51042),Cr=f(6110),xr=f(29966),Sr=f(2236),De=f(37476),y=f(5966),_=f(64317),ee=f(50335),R=f(31199),Fr=f(91595),Ee=f(76772),p=f(2453),A=f(8232),de=f(73320),H=f(55102),C=f(83622),ce=f(71471),Ne=f(86738),re=f(78957),W=f(96068),me=f(78367),jr=f(85265),ae=f(17788),S=f(67294),wr=f(90672),e=f(85893),Dr=function(P){return(0,e.jsxs)(De.Y,{title:"\u7F16\u8F91\u54C1\u79CD\u4FE1\u606F",open:P.updateModalOpen,onFinish:P.onSubmit,modalProps:{onCancel:function(){P.onCancel()}},initialValues:P.values,children:[(0,e.jsx)(y.Z,{name:"varietyName",label:"\u54C1\u79CD\u540D\u79F0",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u54C1\u79CD\u540D\u79F0"}]}),(0,e.jsx)(_.Z,{name:"type",label:"\u7C7B\u578B",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u7C7B\u578B"}],options:[{label:"\u897F\u74DC",value:"\u897F\u74DC"},{label:"\u751C\u74DC",value:"\u751C\u74DC"},{label:"\u5357\u74DC",value:"\u5357\u74DC"},{label:"\u9EC4\u74DC",value:"\u9EC4\u74DC"}]}),(0,e.jsx)(y.Z,{name:"photo",label:"\u7167\u7247URL",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7167\u7247URL"}]}),(0,e.jsx)(ee.Z,{name:"introductionYear",label:"\u5F15\u79CD\u5E74\u4EFD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F15\u79CD\u5E74\u4EFD"}],fieldProps:{picker:"year"}}),(0,e.jsx)(y.Z,{name:"source",label:"\u6765\u6E90",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6765\u6E90"}]}),(0,e.jsx)(_.Z,{name:"breedingType",label:"\u5E38\u89C4\u79CD/\u7EAF\u5316",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5E38\u89C4\u79CD/\u7EAF\u5316"}],options:[{label:"\u5E38\u89C4\u79CD",value:"regular"},{label:"\u7EAF\u5316",value:"pure"}]}),(0,e.jsx)(y.Z,{name:"seedNumber",label:"\u7559\u79CD\u7F16\u53F7",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7559\u79CD\u7F16\u53F7"}]}),(0,e.jsx)(ee.Z,{name:"plantingYear",label:"\u79CD\u690D\u5E74\u4EFD",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u79CD\u690D\u5E74\u4EFD"}],fieldProps:{picker:"year"}}),(0,e.jsx)(y.Z,{name:"resistance",label:"\u6297\u6027"}),(0,e.jsx)(wr.Z,{name:"fruitCharacteristics",label:"\u7ED3\u679C\u7279\u5F81"}),(0,e.jsx)(y.Z,{name:"floweringPeriod",label:"\u5F00\u82B1\u671F/\u679C\u5B9E\u53D1\u80B2\u671F"}),(0,e.jsx)(R.Z,{name:"fruitCount",label:"\u7559\u679C\u4E2A\u6570",min:0}),(0,e.jsx)(R.Z,{name:"yield",label:"\u4EA7\u91CF",min:0}),(0,e.jsx)(y.Z,{name:"fruitShape",label:"\u679C\u578B"}),(0,e.jsx)(y.Z,{name:"skinColor",label:"\u76AE\u8272"}),(0,e.jsx)(y.Z,{name:"fleshColor",label:"\u8089\u8272"}),(0,e.jsx)(R.Z,{name:"singleFruitWeight",label:"\u5355\u679C\u91CD(g)",min:0}),(0,e.jsx)(R.Z,{name:"fleshThickness",label:"\u8089\u539A(mm)",min:0}),(0,e.jsx)(R.Z,{name:"sugarContent",label:"\u7CD6\u5EA6(\xB0Brix)",min:0}),(0,e.jsx)(y.Z,{name:"texture",label:"\u8D28\u5730"}),(0,e.jsx)(y.Z,{name:"overallTaste",label:"\u603B\u4F53\u53E3\u611F"}),(0,e.jsx)(y.Z,{name:"combiningAbility",label:"\u914D\u5408\u529B"}),(0,e.jsx)(y.Z,{name:"parentMale",label:"\u7236\u672C"}),(0,e.jsx)(y.Z,{name:"parentFemale",label:"\u6BCD\u672C"})]})},Er=Dr,Nr=["editing","dataIndex","title","inputType","children"],Zr=function(){var Q=x()(h()().mark(function P(z){var F;return h()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return F=p.ZP.loading("Configuring"),k.prev=1,k.next=4,(0,Fe.D7)({name:z.name,desc:z.desc,key:z.key});case 4:return F(),p.ZP.success("\u6210\u529F\u914D\u7F6E"),k.abrupt("return",!0);case 9:return k.prev=9,k.t0=k.catch(1),F(),p.ZP.error("\u914D\u7F6E\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"),k.abrupt("return",!1);case 14:case"end":return k.stop()}},P,null,[[1,9]])}));return function(z){return Q.apply(this,arguments)}}(),Ar=localStorage.getItem("token"),kr=function(){var Q=x()(h()().mark(function P(){var z,F,X,k;return h()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(z=localStorage.getItem("sowingRecords"),F=z?JSON.parse(z):[],F.length!==0){N.next=5;break}return p.ZP.warning("\u6682\u65E0\u64AD\u79CD\u8BB0\u5F55"),N.abrupt("return");case 5:return N.prev=5,X=p.ZP.loading("\u6B63\u5728\u63D0\u4EA4\u64AD\u79CD\u8BA1\u5212\u8868..."),N.next=9,fetch("/api/seed/sow",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(Ar)},body:JSON.stringify(F)});case 9:if(k=N.sent,k.ok){N.next=12;break}throw new Error("\u63D0\u4EA4\u64AD\u79CD\u8BA1\u5212\u8868\u5931\u8D25");case 12:X(),console.log(JSON.stringify(F)),p.ZP.success("\u64AD\u79CD\u8BA1\u5212\u8868\u5DF2\u63D0\u4EA4\u5E76\u4FDD\u5B58\u5230\u6570\u636E\u5E93"),N.next=20;break;case 17:N.prev=17,N.t0=N.catch(5),p.ZP.error("\u63D0\u4EA4\u64AD\u79CD\u8BA1\u5212\u8868\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 20:case"end":return N.stop()}},P,null,[[5,17]])}));return function(){return Q.apply(this,arguments)}}(),Br=function(){var P=A.Z.useForm(),z=b()(P,1),F=z[0],X=(0,S.useState)(!1),k=b()(X,2),Ze=k[0],N=k[1],Pr=(0,S.useState)(!1),Ae=b()(Pr,2),Ir=Ae[0],ke=Ae[1],zr=(0,S.useState)(!1),Be=b()(zr,2),Rr=Be[0],pe=Be[1],Or=(0,S.useState)(!1),Te=b()(Or,2),ne=Te[0],Pe=Te[1],Lr=(0,S.useState)(!1),Ie=b()(Lr,2),ze=Ie[0],Re=Ie[1],$=(0,S.useRef)(),$r=(0,S.useState)(),Oe=b()($r,2),D=Oe[0],te=Oe[1],Ur=(0,S.useState)([]),Le=b()(Ur,2),I=Le[0],ue=Le[1],Yr=(0,Ee.useIntl)(),Jr=(0,S.useState)(!1),$e=b()(Jr,2),Mr=$e[0],he=$e[1],Hr=(0,S.useState)(),Ue=b()(Hr,2),v=Ue[0],Ye=Ue[1],Wr=(0,Ee.useNavigate)(),Vr=(0,S.useState)(!1),Je=b()(Vr,2),Kr=Je[0],fe=Je[1],Gr=(0,S.useState)([]),Me=b()(Gr,2),He=Me[0],ie=Me[1],Qr=(0,S.useState)(),We=b()(Qr,2),J=We[0],Xr=We[1],qr=(0,S.useState)(!1),Ve=b()(qr,2),_r=Ve[0],se=Ve[1],ea=A.Z.useForm(),ra=b()(ea,1),V=ra[0],aa=(0,S.useState)(5),Ke=b()(aa,2),na=Ke[0],Ge=Ke[1],ta=(0,S.useState)(5),Qe=b()(ta,2),ua=Qe[0],Xe=Qe[1],ia=(0,S.useState)(5),qe=b()(ia,2),sa=qe[0],_e=qe[1],la=(0,S.useState)(""),er=b()(la,2),rr=er[0],ge=er[1],oa=function(a){return a.id===rr},da=(0,S.useState)(""),ar=b()(da,2),ca=ar[0],ve=ar[1],ma=(0,S.useState)(""),nr=b()(ma,2),pa=nr[0],ye=nr[1],ha=function(a){F.setFieldsValue({code:a.code,seedNumber:a.seedNumber,varietyName:a.varietyName,sowingCount:a.sowingCount,planNumber:a.planNumber}),ge(a.id)},fa=function(){var u=x()(h()().mark(function a(r){var s,t,n,d;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,F.validateFields();case 3:s=l.sent,t=q()(He),n=t.findIndex(function(g){return r.id===g.id}),n>-1&&(d=B()(B()(B()({},t[n]),s),{},{varietyName:t[n].varietyName}),t.splice(n,1,d),ie(t),localStorage.setItem("sowingRecords",JSON.stringify(t)),ge(""),p.ZP.success("\u4FEE\u6539\u6210\u529F")),l.next=13;break;case 9:l.prev=9,l.t0=l.catch(0),console.error("Save failed:",l.t0),p.ZP.error("\u4FEE\u6539\u5931\u8D25\uFF0C\u8BF7\u68C0\u67E5\u8F93\u5165");case 13:case"end":return l.stop()}},a,null,[[0,9]])}));return function(r){return u.apply(this,arguments)}}(),ga=function(){ge("")},U=localStorage.getItem("token"),va=function(a){var r=a.editing,s=a.dataIndex,t=a.title,n=a.inputType,d=a.children,i=cr()(a,Nr),l=n==="number"?(0,e.jsx)(de.Z,{min:1,precision:0}):(0,e.jsx)(H.Z,{});return(0,e.jsx)("td",B()(B()({},i),{},{children:r?(0,e.jsx)(A.Z.Item,{name:s,style:{margin:0},rules:[{required:!0,message:"\u8BF7\u8F93\u5165".concat(t,"!")}],children:l}):d}))},tr=function(){var u=x()(h()().mark(function a(r){var s,t,n,d,i,l;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,s=localStorage.getItem("token"),c.next=4,fetch("/api/seed/getMatched?varietyName=".concat(encodeURIComponent(r.varietyName)),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(s)}});case 4:return t=c.sent,c.next=7,t.json();case 7:n=c.sent,d=[],Array.isArray(n.data)?d=n.data.map(function(o){return{id:o.sowingNumber||o.id,femaleNumber:o.femaleNumber,maleNumber:o.maleNumber,femaleName:o.femaleName,maleName:o.maleName,hybridization:o.hybridCombination||o.hybridization,date:o.matchingTime||o.date}}):n.data&&typeof n.data=="string"&&n.data.trim()!==""&&(i=n.data.split("|").filter(function(o){return o.trim()!==""}),d=i.map(function(o,T){return{id:"hybrid-".concat(r.varietyName,"-").concat(T),hybridization:o.trim(),femaleName:r.varietyName,maleName:o.trim().split("*")[1]||o.trim().split("*")[0]||"",femaleNumber:r.seedNumber,maleNumber:"",date:new Date().toISOString().split("T")[0]}})),l=B()(B()({},r),{},{hybridizationList:d}),Ye(l),he(!0),c.next=19;break;case 15:c.prev=15,c.t0=c.catch(0),console.error("\u83B7\u53D6\u6742\u4EA4\u6570\u636E\u5931\u8D25:",c.t0),p.ZP.error("\u83B7\u53D6\u6742\u4EA4\u6570\u636E\u5931\u8D25");case 19:case"end":return c.stop()}},a,null,[[0,15]])}));return function(r){return u.apply(this,arguments)}}(),ur=function(){var u=x()(h()().mark(function a(){var r,s,t,n,d;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(l.prev=0,v){l.next=3;break}return l.abrupt("return");case 3:return r=localStorage.getItem("token"),l.next=6,fetch("/api/seed/getMatched?varietyName=".concat(encodeURIComponent(v.varietyName||"")),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(r)}});case 6:return s=l.sent,l.next=9,s.json();case 9:t=l.sent,n=[],Array.isArray(t.data)?n=t.data.map(function(g){return{id:g.sowingNumber||g.id,femaleNumber:g.femaleNumber,maleNumber:g.maleNumber,femaleName:g.femaleName,maleName:g.maleName,hybridization:g.hybridCombination||g.hybridization,date:g.matchingTime||g.date}}):t.data&&typeof t.data=="string"&&t.data.trim()!==""&&(d=t.data.split("|").filter(function(g){return g.trim()!==""}),n=d.map(function(g,c){return{id:"hybrid-".concat(v.varietyName,"-").concat(c),hybridization:g.trim(),femaleName:v.varietyName,maleName:g.trim().split("*")[1]||g.trim().split("*")[0]||"",femaleNumber:v.seedNumber,maleNumber:"",date:new Date().toISOString().split("T")[0]}})),Ye(B()(B()({},v),{},{hybridizationList:n})),l.next=18;break;case 15:l.prev=15,l.t0=l.catch(0),console.error("\u5237\u65B0\u6742\u4EA4\u6570\u636E\u5931\u8D25:",l.t0);case 18:case"end":return l.stop()}},a,null,[[0,15]])}));return function(){return u.apply(this,arguments)}}(),ya=function(a){Xr(a);var r=localStorage.getItem("sowingRecords"),s=r?JSON.parse(r):[],t=s.filter(function(n){return n.seedNumber===a.seedNumber&&n.varietyName===a.varietyName});ie(t),fe(!0),setTimeout(function(){F.setFieldsValue({code:"TZ-".concat(a.key||1),seedNumber:a.seedNumber||"",varietyName:a.varietyName||"",sowingCount:0,planNumber:""})},100)},ir=function(){var u=x()(h()().mark(function a(r){var s,t,n,d;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(J){l.next=3;break}return p.ZP.error("\u672A\u9009\u62E9\u54C1\u79CD"),l.abrupt("return");case 3:try{s={id:"SW-".concat(Date.now()),code:r.code,seedNumber:J.seedNumber||"",varietyName:J.varietyName||"",sowingCount:r.sowingCount||0,planNumber:r.planNumber||"",createTime:new Date().toISOString()},t=localStorage.getItem("sowingRecords"),n=t?JSON.parse(t):[],n.unshift(s),localStorage.setItem("sowingRecords",JSON.stringify(n)),d=n.filter(function(g){return g.seedNumber===J.seedNumber&&g.varietyName===J.varietyName}),ie(d),p.ZP.success("\u5DF2\u6DFB\u52A0\u5230\u64AD\u79CD\u8868"),F.setFieldsValue({code:"TZ-".concat(J.key||1),seedNumber:J.seedNumber||"",varietyName:J.varietyName||"",sowingCount:0,planNumber:""})}catch(g){p.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}case 4:case"end":return l.stop()}},a)}));return function(r){return u.apply(this,arguments)}}(),ba=[(0,e.jsx)(C.ZP,{onClick:function(){fe(!1),F.resetFields()},children:"\u5173\u95ED"},"cancel"),(0,e.jsx)(C.ZP,{type:"primary",icon:(0,e.jsx)(je.Z,{}),onClick:kr,children:"\u751F\u6210\u64AD\u79CD\u8BA1\u5212\u8868"},"generate")],Ca=function(){var u=x()(h()().mark(function a(r){var s,t;return h()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,s={key:r.key,photo1:r.photo1||"",photo2:r.photo2||"",varietyName:r.varietyName||"",type:r.type||"",introductionYear:r.introductionYear||"",source:r.source||"",breedingType:r.breedingType||"regular",seedNumber:r.seedNumber||"",plantingYear:r.plantingYear||"",resistance:r.resistance||"",fruitCharacteristics:r.fruitCharacteristics||"",floweringPeriod:r.floweringPeriod||"",fruitCount:r.fruitCount||0,yield:r.yield||0,fruitShape:r.fruitShape||"",skinColor:r.skinColor||"",fleshColor:r.fleshColor||"",singleFruitWeight:r.singleFruitWeight||0,fleshThickness:r.fleshThickness||0,sugarContent:r.sugarContent||0,texture:r.texture||"",overallTaste:r.overallTaste||"",combiningAbility:r.combiningAbility||"",hybridization:r.hybridization||"",saveTime:r.reserveTime||""},d.next=4,(0,Fe.w2)(s);case 4:t=d.sent,console.log("Save seed response:",t),t&&t.msg==="SUCCESS"?p.ZP.success("\u5DF2\u6210\u529F\u4FDD\u5B58\u5230\u7559\u79CD\u9875\u9762"):t&&t.exists===!0?p.ZP.error("\u8BE5\u79CD\u5B50\u5DF2\u7ECF\u5728\u7559\u79CD\u8BB0\u5F55\u4E2D"):p.ZP.error((t==null?void 0:t.message)||"\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"),d.next=12;break;case 9:d.prev=9,d.t0=d.catch(0),p.ZP.error("\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 12:case"end":return d.stop()}},a,null,[[0,9]])}));return function(r){return u.apply(this,arguments)}}(),xa=function(){var u=x()(h()().mark(function a(r){var s,t,n;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(s=p.ZP.loading("\u6B63\u5728\u6279\u91CF\u4FDD\u5B58\u5230\u7559\u79CD\u9875\u9762"),!(!r||r.length===0)){i.next=3;break}return i.abrupt("return",!0);case 3:return console.log("Selected rows for batch save:",r),i.prev=4,i.next=7,fetch("/api/seed/BatchReserve",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)},body:JSON.stringify(r)});case 7:return t=i.sent,i.next=10,t.json();case 10:return n=i.sent,s(),n&&(n.msg==="SUCCESS"||n.code===200)?p.ZP.success("\u6279\u91CF\u4FDD\u5B58\u6210\u529F"):p.ZP.error((n==null?void 0:n.msg)||"\u6279\u91CF\u4FDD\u5B58\u5931\u8D25"),i.abrupt("return",!0);case 16:return i.prev=16,i.t0=i.catch(4),s(),p.ZP.error("\u6279\u91CF\u4FDD\u5B58\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),i.abrupt("return",!1);case 21:case"end":return i.stop()}},a,null,[[4,16]])}));return function(r){return u.apply(this,arguments)}}(),Sa=function(){var u=x()(h()().mark(function a(r){return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!r||r.length===0)){t.next=3;break}return p.ZP.warning("\u8BF7\u5148\u9009\u62E9\u8981\u64AD\u79CD\u7684\u54C1\u79CD"),t.abrupt("return");case 3:se(!0),V.setFieldsValue({planNumber:"PLAN-".concat(new Date().getTime()),defaultSowingCount:1});case 5:case"end":return t.stop()}},a)}));return function(r){return u.apply(this,arguments)}}(),sr=function(){var u=x()(h()().mark(function a(r){var s,t,n,d,i,l;return h()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!(!I||I.length===0)){c.next=3;break}return p.ZP.error("\u672A\u9009\u62E9\u54C1\u79CD"),c.abrupt("return");case 3:return c.prev=3,s=p.ZP.loading("\u6B63\u5728\u6279\u91CF\u6DFB\u52A0\u64AD\u79CD\u8BB0\u5F55..."),t=I.map(function(o,T){return{id:"SW-BATCH-".concat(Date.now(),"-").concat(T),code:"".concat(r.planNumber,"-").concat(String(T+1).padStart(3,"0")),seedNumber:o.seedNumber||"",varietyName:o.varietyName||"",sowingCount:r.defaultSowingCount||1,planNumber:r.planNumber||"",createTime:new Date().toISOString()}}),n=localStorage.getItem("sowingRecords"),d=n?JSON.parse(n):[],d.unshift.apply(d,q()(t)),localStorage.setItem("sowingRecords",JSON.stringify(d)),c.prev=10,c.next=13,fetch("/api/seed/sow",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)},body:JSON.stringify(t)});case 13:if(i=c.sent,i.ok){c.next=16;break}throw new Error("\u63D0\u4EA4\u64AD\u79CD\u8BB0\u5F55\u5230\u670D\u52A1\u5668\u5931\u8D25");case 16:return c.next=18,i.json();case 18:l=c.sent,console.log("\u6279\u91CF\u64AD\u79CD\u63D0\u4EA4\u7ED3\u679C:",l),c.next=26;break;case 22:c.prev=22,c.t0=c.catch(10),console.error("\u63D0\u4EA4\u5230\u540E\u7AEF\u5931\u8D25:",c.t0),p.ZP.warning("\u64AD\u79CD\u8BB0\u5F55\u5DF2\u4FDD\u5B58\u5230\u672C\u5730\uFF0C\u4F46\u63D0\u4EA4\u5230\u670D\u52A1\u5668\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u624B\u52A8\u63D0\u4EA4");case 26:return s(),p.ZP.success("\u5DF2\u6210\u529F\u6DFB\u52A0 ".concat(t.length," \u6761\u64AD\u79CD\u8BB0\u5F55")),se(!1),V.resetFields(),ue([]),c.abrupt("return",!0);case 34:return c.prev=34,c.t1=c.catch(3),p.ZP.error("\u6279\u91CF\u64AD\u79CD\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),c.abrupt("return",!1);case 38:case"end":return c.stop()}},a,null,[[3,34],[10,22]])}));return function(r){return u.apply(this,arguments)}}(),Fa=(0,S.useState)([]),lr=b()(Fa,2),be=lr[0],le=lr[1],ja=(0,S.useState)([]),or=b()(ja,2),wa=or[0],K=or[1],Ce="germplasm_table_data",xe="germplasm_table_data_expiry",Da=24*60*60*1e3,Ea=function(){var a=localStorage.getItem(xe);return a?Date.now()<parseInt(a):!1},Na=function(){if(!Ea())return null;var a=localStorage.getItem(Ce);return a?JSON.parse(a):null},Za=function(a){localStorage.setItem(Ce,JSON.stringify(a)),localStorage.setItem(xe,(Date.now()+Da).toString())},G=function(){localStorage.removeItem(Ce),localStorage.removeItem(xe)},M=function(){var u=x()(h()().mark(function a(){var r,s,t,n,d,i,l,g=arguments;return h()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(r=g.length>0&&g[0]!==void 0?g[0]:!1,o.prev=1,r){o.next=11;break}if(s=Na(),!s){o.next=11;break}return console.log("\u4ECE\u7F13\u5B58\u52A0\u8F7D\u6570\u636E"),le(s),K(s),t=!localStorage.getItem("cache_notice_shown"),t&&(p.ZP.info('\u6570\u636E\u52A0\u8F7D\u5B8C\u6BD5,\u5982\u9700\u6700\u65B0\u6570\u636E\u8BF7\u70B9\u51FB"\u5237\u65B0\u6570\u636E"\u6309\u94AE',3),localStorage.setItem("cache_notice_shown","true")),o.abrupt("return");case 11:return n=localStorage.getItem("token"),o.next=14,fetch("/api/seed/getSeed",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 14:return d=o.sent,o.next=17,d.json();case 17:if(i=o.sent,!Array.isArray(i.data)){o.next=27;break}return o.next=21,Promise.all(i.data.map(function(){var T=x()(h()().mark(function m(j){var O,Z,L,Y;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.prev=0,E.next=3,fetch("/api/seed/getSituation?varietyName=".concat(encodeURIComponent(j.varietyName)),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(n)}});case 3:return O=E.sent,E.next=6,O.json();case 6:return Z=E.sent,L=[],Array.isArray(Z.data)?L=Z.data.map(function(w){return{id:w.sowingNumber||w.id,femaleNumber:w.femaleNumber,maleNumber:w.maleNumber,femaleName:w.femaleName,maleName:w.maleName,hybridization:w.hybridCombination||w.hybridization,date:w.matchingTime||w.date}}):Z.data&&typeof Z.data=="string"&&Z.data.trim()!==""&&(Y=Z.data.split("|").filter(function(w){return w.trim()!==""}),L=Y.map(function(w,Oa){return{id:"hybrid-".concat(j.varietyName,"-").concat(Oa),hybridization:w.trim(),femaleName:j.varietyName,maleName:w.trim().split("*")[1]||w.trim().split("*")[0]||"",femaleNumber:j.seedNumber,maleNumber:"",date:new Date().toISOString().split("T")[0]}})),E.abrupt("return",B()(B()({},j),{},{hybridizationList:L}));case 12:return E.prev=12,E.t0=E.catch(0),console.error("\u83B7\u53D6\u54C1\u79CD ".concat(j.varietyName," \u7684\u6742\u4EA4\u6570\u636E\u5931\u8D25:"),E.t0),E.abrupt("return",B()(B()({},j),{},{hybridizationList:[]}));case 16:case"end":return E.stop()}},m,null,[[0,12]])}));return function(m){return T.apply(this,arguments)}}()));case 21:l=o.sent,Za(l),le(l),K(l),o.next=29;break;case 27:le([]),K([]);case 29:o.next=36;break;case 31:o.prev=31,o.t0=o.catch(1),p.ZP.error("\u83B7\u53D6\u8868\u683C\u6570\u636E\u5931\u8D25"),le([]),K([]);case 36:case"end":return o.stop()}},a,null,[[1,31]])}));return function(){return u.apply(this,arguments)}}();(0,S.useEffect)(function(){M()},[]);var Aa=function(){var u=x()(h()().mark(function a(r){var s;return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(s=p.ZP.loading("\u5220\u9664\u4E2D",0),r){n.next=3;break}return n.abrupt("return",!0);case 3:return n.prev=3,n.next=6,fetch("/api/seed/BatchDeleteSeed",{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)},body:JSON.stringify({keys:r.map(function(d){return d.key})})});case 6:return G(),n.next=9,M(!0);case 9:return s(),p.ZP.success("\u5220\u9664\u6210\u529F"),n.abrupt("return",!0);case 14:return n.prev=14,n.t0=n.catch(3),s(),p.ZP.error("\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n.abrupt("return",!1);case 19:case"end":return n.stop()}},a,null,[[3,14]])}));return function(r){return u.apply(this,arguments)}}(),ka=function(){var u=x()(h()().mark(function a(){var r,s,t,n,d,i,l,g,c,o;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(v){m.next=3;break}return p.ZP.warning("\u672A\u9009\u62E9\u54C1\u79CD"),m.abrupt("return");case 3:if(r=Array.isArray(v.hybridizationList)?v.hybridizationList:[],r.length!==0){m.next=7;break}return p.ZP.warning("\u914D\u7EC4\u8868\u4E3A\u7A7A"),m.abrupt("return");case 7:try{s=["\u7F16\u53F7","\u6BCD\u672C\u7F16\u53F7","\u7236\u672C\u7F16\u53F7","\u6BCD\u672C\u540D\u79F0","\u7236\u672C\u540D\u79F0","\u6742\u4EA4\u7EC4\u5408","\u914D\u7EC4\u65E5\u671F"],t=r.map(function(j){var O,Z,L,Y,oe,E,w;return[(O=j.id)!==null&&O!==void 0?O:"",(Z=j.femaleNumber)!==null&&Z!==void 0?Z:"",(L=j.maleNumber)!==null&&L!==void 0?L:"",(Y=j.femaleName)!==null&&Y!==void 0?Y:"",(oe=j.maleName)!==null&&oe!==void 0?oe:"",(E=j.hybridization)!==null&&E!==void 0?E:"",(w=j.date)!==null&&w!==void 0?w:""]}),n=function(O){var Z=String(O!=null?O:""),L=Z.includes(",")||Z.includes('"')||Z.includes(`
`)||Z.includes("\r"),Y=Z.replace(/"/g,'""');return L?'"'.concat(Y,'"'):Y},d=[s].concat(q()(t)).map(function(j){return j.map(n).join(",")}).join(`
`),i="\uFEFF",l=new Blob([i+d],{type:"text/csv;charset=utf-8;"}),g=URL.createObjectURL(l),c=document.createElement("a"),o=new Date().toISOString().slice(0,10),c.href=g,c.download="".concat(v.varietyName||"\u6742\u4EA4\u914D\u7EC4\u8868","_").concat(o,".csv"),document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(g),p.ZP.success("\u914D\u7EC4\u8868\u5DF2\u5BFC\u51FA")}catch(j){console.error("\u5BFC\u51FA\u5931\u8D25:",j),p.ZP.error("\u5BFC\u51FA\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}case 8:case"end":return m.stop()}},a)}));return function(){return u.apply(this,arguments)}}(),Ba=function(){var u=x()(h()().mark(function a(r){var s,t,n;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:if(!(!v||!r)){i.next=2;break}return i.abrupt("return");case 2:return s={femaleNumber:v.seedNumber,maleNumber:r.seedNumber,femaleName:v.varietyName,maleName:r.varietyName,hybridization:"".concat(r.varietyName,"*").concat(v.varietyName),date:new Date().toISOString().split("T")[0]},i.prev=3,i.next=6,fetch("/api/seed/Hybridization",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)},body:JSON.stringify(s)});case 6:return t=i.sent,i.next=9,t.json();case 9:if(n=i.sent,!(n.msg||n.code===200)){i.next=19;break}return p.ZP.success("\u5DF2\u6DFB\u52A0\u5230\u6742\u4EA4\u914D\u7EC4\u8868"),G(),i.next=15,ur();case 15:return i.next=17,M(!0);case 17:i.next=20;break;case 19:p.ZP.error((n==null?void 0:n.msg)||"\u6DFB\u52A0\u5931\u8D25");case 20:i.next=25;break;case 22:i.prev=22,i.t0=i.catch(3),p.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 25:case"end":return i.stop()}},a,null,[[3,22]])}));return function(r){return u.apply(this,arguments)}}(),Ta=function(a){var r=localStorage.getItem("sowingRecords"),s=r?JSON.parse(r):[],t=s.filter(function(n){return n.id!==a});localStorage.setItem("sowingRecords",JSON.stringify(t)),ie(t),p.ZP.success("\u5220\u9664\u6210\u529F")},Pa=[{title:"\u79CD\u690D\u7F16\u53F7",dataIndex:"code",editable:!0,inputType:"text"},{title:"\u7F16\u53F7",dataIndex:"seedNumber",editable:!0,inputType:"text"},{title:"\u54C1\u79CD\u540D\u79F0",dataIndex:"varietyName",editable:!1,inputType:"text"},{title:"\u64AD\u79CD\u6570\u91CF",dataIndex:"sowingCount",editable:!0,inputType:"number"},{title:"\u8BA1\u5212\u7F16\u53F7",dataIndex:"planNumber",editable:!0,inputType:"text"},{title:"\u64CD\u4F5C",dataIndex:"operation",render:function(a,r){var s=oa(r);return s?(0,e.jsxs)("span",{children:[(0,e.jsx)(ce.Z.Link,{onClick:function(){return fa(r)},style:{marginRight:8},children:"\u4FDD\u5B58"}),(0,e.jsx)(Ne.Z,{title:"\u786E\u5B9A\u53D6\u6D88?",onConfirm:ga,children:(0,e.jsx)("a",{children:"\u53D6\u6D88"})})]}):(0,e.jsxs)(re.Z,{children:[(0,e.jsx)(ce.Z.Link,{disabled:rr!=="",onClick:function(){return ha(r)},children:"\u7F16\u8F91"}),(0,e.jsx)(Ne.Z,{title:"\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u8BB0\u5F55\u5417?",onConfirm:function(){return Ta(r.id)},children:(0,e.jsx)(ce.Z.Link,{type:"danger",children:"\u5220\u9664"})})]})}}],Ia=function(){var u=x()(h()().mark(function a(r){var s;return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Pe(!0),n.prev=1,n.next=4,fetch("/api/seed/Seedimport",{method:"POST",body:r,headers:{Authorization:"Bearer ".concat(U)}});case 4:if(s=n.sent,console.log(r),s.ok){n.next=8;break}throw new Error("\u5BFC\u5165\u5931\u8D25");case 8:p.ZP.success("\u5BFC\u5165\u6210\u529F"),G(),M(!0),n.next=15;break;case 13:n.prev=13,n.t0=n.catch(1);case 15:return n.prev=15,Pe(!1),n.finish(15);case 18:case"end":return n.stop()}},a,null,[[1,13,15,18]])}));return function(r){return u.apply(this,arguments)}}(),za=[{title:"\u5E8F\u53F7",dataIndex:"key",valueType:"text",width:80,search:!1,render:function(a,r){return r.key},sorter:function(a,r){var s=typeof a.key=="number"?a.key:parseInt(a.key,10),t=typeof r.key=="number"?r.key:parseInt(r.key,10);return!isNaN(s)&&!isNaN(t)?s-t:String(a.key).localeCompare(String(r.key))}},{title:"\u54C1\u79CD\u540D\u79F0",dataIndex:"varietyName",valueType:"text"},{title:"\u7C7B\u578B",dataIndex:"type",valueType:"text",valueEnum:{\u897F\u74DC:{text:"\u897F\u74DC"},\u751C\u74DC:{text:"\u751C\u74DC"},\u5357\u74DC:{text:"\u5357\u74DC"},\u9EC4\u74DC:{text:"\u9EC4\u74DC"}},sorter:function(a,r){return(a.type||"").localeCompare(r.type||"")}},{title:"\u5F15\u79CD\u5E74\u4EFD",dataIndex:"introductionYear",valueType:"dateYearRange",sorter:function(a,r){return(a.introductionYear||"").localeCompare(r.introductionYear||"")},render:function(a,r){return r.introductionYear},search:{transform:function(a){return{introductionYearRange:a}}}},{title:"\u6765\u6E90",dataIndex:"source",valueType:"text"},{title:"\u5E38\u89C4\u79CD/\u7EAF\u5316",dataIndex:"breedingType",valueType:"select",valueEnum:{regular:{text:"\u5E38\u89C4\u79CD"},pure:{text:"\u7EAF\u5316"}}},{title:"\u7559\u79CD\u7F16\u53F7",dataIndex:"seedNumber",valueType:"text"},{title:"\u679C\u578B",dataIndex:"fruitShape",valueType:"text"},{title:"\u76AE\u8272",dataIndex:"skinColor",valueType:"text"},{title:"\u8D28\u5730",dataIndex:"texture",valueType:"text"},{title:"\u6742\u4EA4\u60C5\u51B5",dataIndex:"hybridization",valueType:"text",render:function(a,r){var s=Array.isArray(r.hybridizationList)?r.hybridizationList:[];return(0,e.jsx)(re.Z,{direction:"vertical",size:"small",style:{width:"100%"},children:s.length>0?(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{children:s.map(function(t){return(0,e.jsx)("div",{style:{marginBottom:"4px"},children:t.hybridization},t.id)})}),(0,e.jsx)(C.ZP,{type:"link",size:"small",onClick:function(){return tr(r)},children:"\u7EE7\u7EED\u6742\u4EA4"})]}):(0,e.jsx)(C.ZP,{type:"link",onClick:function(){return tr(r)},children:"\u5C1A\u672A\u6742\u4EA4"})})}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",width:280,render:function(a,r){return[(0,e.jsx)(C.ZP,{type:"link",onClick:function(){te(r),Re(!0)},children:"\u67E5\u770B\u8BE6\u60C5"},"view"),(0,e.jsx)(C.ZP,{type:"primary",onClick:function(){ya(r)},children:"\u64AD\u79CD"},"sowing"),(0,e.jsx)(C.ZP,{type:"primary",onClick:function(){Ca(r)},children:"\u7559\u79CD"},"save")]}}],Ra=function(){$.current&&$.current.reload()};return(0,e.jsxs)(Cr._z,{children:[(0,e.jsx)(xr.Z,{headerTitle:Yr.formatMessage({id:"pages.searchTable.ku",defaultMessage:"\u79CD\u8D28\u8D44\u6E90\u5E93"}),actionRef:$,rowKey:"key",search:{labelWidth:120,defaultCollapsed:!1,collapseRender:function(a,r){return r?(0,e.jsxs)("a",{style:{fontSize:"14px",color:"#2E7D32"},onClick:Ra,children:[a?"\u5C55\u5F00":"\u6536\u8D77"," ",a?(0,e.jsx)(vr.Z,{}):(0,e.jsx)(yr.Z,{})]}):null}},form:{onValuesChange:function(a,r){var s=q()(be);Object.entries(r).forEach(function(t){var n=b()(t,2),d=n[0],i=n[1];if(i){if(d==="introductionYearRange"&&Array.isArray(i)){var l=b()(i,2),g=l[0],c=l[1];g&&c&&(s=s.filter(function(o){var T=o.introductionYear;return T>=g&&T<=c}));return}s=s.filter(function(o){var T=o[d];return T?T.toString().toLowerCase().includes(i.toString().toLowerCase()):!1})}}),K(s)}},onReset:function(){K(be)},toolBarRender:function(){return[(0,e.jsx)(C.ZP,{onClick:function(){G(),M(!0),p.ZP.success("\u6570\u636E\u5DF2\u5237\u65B0")},children:"\u5237\u65B0\u6570\u636E"},"refresh"),(0,e.jsx)(C.ZP,{type:"primary",icon:(0,e.jsx)(we.Z,{}),onClick:function(){return pe(!0)},children:"\u5BFC\u5165Excel"},"import"),(0,e.jsxs)(C.ZP,{type:"primary",onClick:function(){N(!0)},children:[(0,e.jsx)(br.Z,{})," \u65B0\u589E"]},"primary")]},dataSource:wa,columns:za,rowSelection:{onChange:function(a,r){ue(r)},selections:[W.Z.SELECTION_ALL,W.Z.SELECTION_INVERT]},pagination:{showQuickJumper:!0,showSizeChanger:!0,pageSizeOptions:["10","20","50","100"],defaultPageSize:10,showTotal:function(a){return"\u5171 ".concat(a," \u6761\u8BB0\u5F55")}}}),(I==null?void 0:I.length)>0&&(0,e.jsxs)(Sr.S,{extra:(0,e.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,e.jsx)("a",{style:{fontWeight:600,color:"#1890ff"},children:I.length})," ","\u4E2A\u54C1\u79CD"]}),children:[(0,e.jsx)(C.ZP,{onClick:x()(h()().mark(function u(){var a,r;return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Aa(I);case 2:ue([]),(a=$.current)===null||a===void 0||(r=a.reloadAndRest)===null||r===void 0||r.call(a);case 4:case"end":return t.stop()}},u)})),children:"\u6279\u91CF\u5220\u9664"}),(0,e.jsx)(C.ZP,{type:"primary",onClick:x()(h()().mark(function u(){var a,r;return h()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,xa(I);case 2:ue([]),(a=$.current)===null||a===void 0||(r=a.reloadAndRest)===null||r===void 0||r.call(a);case 4:case"end":return t.stop()}},u)})),children:"\u6279\u91CF\u7559\u79CD"}),(0,e.jsx)(C.ZP,{onClick:function(){Sa(I)},children:"\u6279\u91CF\u64AD\u79CD"})]}),(0,e.jsxs)(De.Y,{title:"\u65B0\u589E\u54C1\u79CD",width:"800px",open:Ze,onOpenChange:function(a){N(a),a||(ve(""),ye(""))},onFinish:function(){var u=x()(h()().mark(function a(r){var s,t,n,d;return h()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,s=B()(B()({},r),{},{photo1:ca,photo2:pa}),l.next=4,fetch("/api/seed/addseed",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U),Accept:"application/json"},body:JSON.stringify(s)});case 4:if(t=l.sent,t.ok){l.next=12;break}return l.next=8,t.text();case 8:return n=l.sent,console.error("\u8BF7\u6C42\u5931\u8D25:",t.status,n),p.ZP.error("\u8BF7\u6C42\u5931\u8D25: ".concat(t.status)),l.abrupt("return",!1);case 12:return l.next=14,t.json();case 14:if(d=l.sent,!(d&&(d.msg==="SUCCESS"||d.code===200||d.success))){l.next=25;break}return G(),l.next=19,M(!0);case 19:return N(!1),p.ZP.success("\u6DFB\u52A0\u6210\u529F"),$.current&&$.current.reload(),l.abrupt("return",!0);case 25:return p.ZP.error((d==null?void 0:d.msg)||(d==null?void 0:d.message)||"\u6DFB\u52A0\u5931\u8D25"),l.abrupt("return",!1);case 27:l.next=34;break;case 29:return l.prev=29,l.t0=l.catch(0),console.error("\u6DFB\u52A0\u79CD\u5B50\u5931\u8D25:",l.t0),p.ZP.error("\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),l.abrupt("return",!1);case 34:case"end":return l.stop()}},a,null,[[0,29]])}));return function(a){return u.apply(this,arguments)}}(),children:[(0,e.jsx)(y.Z,{label:"\u54C1\u79CD\u540D\u79F0",rules:[{required:!0,message:"\u54C1\u79CD\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"varietyName"}),(0,e.jsx)(_.Z,{label:"\u7C7B\u578B",rules:[{required:!0,message:"\u7C7B\u578B\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"type",options:[{label:"\u897F\u74DC",value:"\u897F\u74DC"},{label:"\u751C\u74DC",value:"\u751C\u74DC"},{label:"\u5357\u74DC",value:"\u5357\u74DC"},{label:"\u83DC\u74DC",value:"\u83DC\u74DC"}]}),(0,e.jsx)(A.Z.Item,{label:"\u56FE\u7247\u4E0A\u4F20",name:"photo1",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u7B2C\u4E00\u5F20\u56FE\u7247"}],children:(0,e.jsx)(me.Z,{name:"file",listType:"picture",maxCount:1,showUploadList:{showRemoveIcon:!0},customRequest:function(){var u=x()(h()().mark(function a(r){var s,t,n,d,i,l,g,c,o;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return s=r.file,t=r.onSuccess,n=r.onError,m.prev=1,d=new FormData,d.append("file",s),console.log("file",s),m.next=7,fetch("/api/cos/upload",{method:"POST",headers:{Authorization:"Bearer ".concat(U)},body:d});case 7:if(i=m.sent,i.ok){m.next=14;break}return m.next=11,i.text();case 11:throw l=m.sent,console.error("\u4E0A\u4F20\u54CD\u5E94\u9519\u8BEF:",i.status,l),new Error("\u4E0A\u4F20\u5931\u8D25: ".concat(i.status));case 14:if(g=i.headers.get("content-type"),!(!g||!g.includes("application/json"))){m.next=21;break}return m.next=18,i.text();case 18:throw c=m.sent,console.error("\u54CD\u5E94\u4E0D\u662FJSON\u683C\u5F0F:",g,c),new Error("\u670D\u52A1\u5668\u8FD4\u56DE\u683C\u5F0F\u9519\u8BEF");case 21:return m.next=23,i.json();case 23:if(o=m.sent,console.log("\u4E0A\u4F20\u54CD\u5E94:",o),!(o.code==="0"&&o.msg==="SUCCESS"&&o.data)){m.next=33;break}F.setFieldsValue({photo1:[o.data]}),ve(o.data),console.log("\u7B2C\u4E00\u5F20\u56FE\u7247URL\u5DF2\u4FDD\u5B58\u5230\u672C\u5730\u72B6\u6001:",o.data),t&&t({}),p.ZP.success("\u7B2C\u4E00\u5F20\u56FE\u7247\u4E0A\u4F20\u6210\u529F"),m.next=34;break;case 33:throw new Error(o.msg||"\u4E0A\u4F20\u5931\u8D25");case 34:m.next=41;break;case 36:m.prev=36,m.t0=m.catch(1),console.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25:",m.t0),p.ZP.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n&&n(new Error("\u4E0A\u4F20\u5931\u8D25"));case 41:case"end":return m.stop()}},a,null,[[1,36]])}));return function(a){return u.apply(this,arguments)}}(),onChange:function(a){a.file.status==="removed"&&(F.setFieldsValue({photo1:""}),ve(""),console.log("\u7B2C\u4E00\u5F20\u56FE\u7247\u5DF2\u4ECE\u672C\u5730\u72B6\u6001\u4E2D\u5220\u9664"))},children:(0,e.jsx)(C.ZP,{children:"\u4E0A\u4F20\u7B2C\u4E00\u5F20\u56FE\u7247"})})}),(0,e.jsx)(A.Z.Item,{label:"\u7B2C\u4E8C\u5F20\u56FE\u7247",name:"photo2",children:(0,e.jsx)(me.Z,{name:"file",listType:"picture",maxCount:1,showUploadList:{showRemoveIcon:!0},customRequest:function(){var u=x()(h()().mark(function a(r){var s,t,n,d,i,l,g,c,o;return h()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return s=r.file,t=r.onSuccess,n=r.onError,m.prev=1,d=new FormData,d.append("file",s),console.log("file",s),m.next=7,fetch("/api/cos/upload",{method:"POST",headers:{Authorization:"Bearer ".concat(U)},body:d});case 7:if(i=m.sent,i.ok){m.next=14;break}return m.next=11,i.text();case 11:throw l=m.sent,console.error("\u4E0A\u4F20\u54CD\u5E94\u9519\u8BEF:",i.status,l),new Error("\u4E0A\u4F20\u5931\u8D25: ".concat(i.status));case 14:if(g=i.headers.get("content-type"),!(!g||!g.includes("application/json"))){m.next=21;break}return m.next=18,i.text();case 18:throw c=m.sent,console.error("\u54CD\u5E94\u4E0D\u662FJSON\u683C\u5F0F:",g,c),new Error("\u670D\u52A1\u5668\u8FD4\u56DE\u683C\u5F0F\u9519\u8BEF");case 21:return m.next=23,i.json();case 23:if(o=m.sent,console.log("\u4E0A\u4F20\u54CD\u5E94:",o),!(o.code==="0"&&o.msg==="SUCCESS"&&o.data)){m.next=33;break}ye(o.data),console.log("\u7B2C\u4E8C\u5F20\u56FE\u7247URL\u5DF2\u4FDD\u5B58\u5230\u672C\u5730\u72B6\u6001:",o.data),F.setFieldsValue({photo2:o.data}),t&&t({}),p.ZP.success("\u7B2C\u4E8C\u5F20\u56FE\u7247\u4E0A\u4F20\u6210\u529F"),m.next=34;break;case 33:throw new Error(o.msg||"\u4E0A\u4F20\u5931\u8D25");case 34:m.next=41;break;case 36:m.prev=36,m.t0=m.catch(1),console.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25:",m.t0),p.ZP.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5"),n&&n(new Error("\u4E0A\u4F20\u5931\u8D25"));case 41:case"end":return m.stop()}},a,null,[[1,36]])}));return function(a){return u.apply(this,arguments)}}(),onChange:function(a){a.file.status==="removed"&&(ye(""),console.log("\u7B2C\u4E8C\u5F20\u56FE\u7247\u5DF2\u4ECE\u672C\u5730\u72B6\u6001\u4E2D\u5220\u9664"),F.setFieldsValue({photo2:""}))},children:(0,e.jsx)(C.ZP,{children:"\u4E0A\u4F20\u7B2C\u4E8C\u5F20\u56FE\u7247\uFF08\u53EF\u9009\uFF09"})})}),(0,e.jsx)(ee.Z,{label:"\u5F15\u79CD\u5E74\u4EFD",rules:[{required:!0,message:"\u5F15\u79CD\u5E74\u4EFD\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"introductionYear",fieldProps:{picker:"year"}}),(0,e.jsx)(y.Z,{label:"\u6765\u6E90",rules:[{required:!0,message:"\u6765\u6E90\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"source"}),(0,e.jsx)(_.Z,{label:"\u5E38\u89C4\u79CD/\u7EAF\u5316",rules:[{required:!0,message:"\u5E38\u89C4\u79CD/\u7EAF\u5316\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"breedingType",options:[{label:"\u5E38\u89C4\u79CD",value:"regular"},{label:"\u7EAF\u5316",value:"pure"}]}),(0,e.jsx)(y.Z,{label:"\u7559\u79CD\u7F16\u53F7",rules:[{required:!0,message:"\u7559\u79CD\u7F16\u53F7\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"seedNumber"}),(0,e.jsx)(ee.Z,{label:"\u79CD\u690D\u5E74\u4EFD",rules:[{required:!0,message:"\u79CD\u690D\u5E74\u4EFD\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"plantingYear",fieldProps:{picker:"year"}}),(0,e.jsx)(y.Z,{label:"\u6297\u6027",width:"md",name:"resistance"}),(0,e.jsx)(y.Z,{label:"\u7ED3\u679C\u7279\u5F81",width:"md",name:"fruitCharacteristics"}),(0,e.jsx)(y.Z,{label:"\u5F00\u82B1\u671F/\u679C\u5B9E\u53D1\u80B2\u671F",width:"md",name:"floweringPeriod"}),(0,e.jsx)(R.Z,{label:"\u7559\u679C\u4E2A\u6570",width:"md",name:"fruitCount",min:0}),(0,e.jsx)(R.Z,{label:"\u4EA7\u91CF",width:"md",name:"yield",min:0}),(0,e.jsx)(y.Z,{label:"\u679C\u578B",width:"md",name:"fruitShape"}),(0,e.jsx)(y.Z,{label:"\u76AE\u8272",width:"md",name:"skinColor"}),(0,e.jsx)(y.Z,{label:"\u8089\u8272",width:"md",name:"fleshColor"}),(0,e.jsx)(R.Z,{label:"\u5355\u679C\u91CD(g)",width:"md",name:"singleFruitWeight",min:0}),(0,e.jsx)(R.Z,{label:"\u8089\u539A(mm)",width:"md",name:"fleshThickness",min:0}),(0,e.jsx)(R.Z,{label:"\u7CD6\u5EA6(\xB0Brix)",width:"md",name:"sugarContent",min:0}),(0,e.jsx)(y.Z,{label:"\u8D28\u5730",width:"md",name:"texture"}),(0,e.jsx)(y.Z,{label:"\u603B\u4F53\u53E3\u611F",width:"md",name:"overallTaste"}),(0,e.jsx)(y.Z,{label:"\u914D\u5408\u529B",width:"md",name:"combiningAbility"}),(0,e.jsx)(y.Z,{label:"\u7236\u672C",width:"md",name:"parentMale"}),(0,e.jsx)(y.Z,{label:"\u6BCD\u672C",width:"md",name:"parentFemale"})]}),(0,e.jsx)(Er,{onSubmit:function(){var u=x()(h()().mark(function a(r){var s;return h()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Zr(r);case 2:s=n.sent,s&&(ke(!1),te(void 0),$.current&&$.current.reload());case 4:case"end":return n.stop()}},a)}));return function(a){return u.apply(this,arguments)}}(),onCancel:function(){ke(!1),ze||te(void 0)},updateModalOpen:Ir,values:D||{}}),(0,e.jsx)(jr.Z,{width:800,open:ze,onClose:function(){te(void 0),Re(!1)},closable:!1,children:D&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("div",{style:{marginBottom:24},children:[(0,e.jsx)("h4",{style:{marginBottom:16},children:"\u7167\u7247"}),(0,e.jsxs)("div",{style:{width:"100%",display:"flex",justifyContent:"center",gap:"16px",border:"1px solid #f0f0f0",borderRadius:"4px",padding:"16px",backgroundColor:"#fafafa"},children:[D.photo1?(0,e.jsx)("img",{src:D.photo1,alt:"".concat(D.varietyName," - \u56FE\u72471"),style:{maxWidth:"45%",maxHeight:"400px",objectFit:"contain"},onError:function(a){console.error("\u56FE\u72471\u52A0\u8F7D\u5931\u8D25:",D.photo1),a.currentTarget.style.display="none"}}):null,D.photo2?(0,e.jsx)("img",{src:D.photo2,alt:"".concat(D.varietyName," - \u56FE\u72472"),style:{maxWidth:"45%",maxHeight:"400px",objectFit:"contain"},onError:function(a){console.error("\u56FE\u72472\u52A0\u8F7D\u5931\u8D25:",D.photo2),a.currentTarget.style.display="none"}}):null,!D.photo1&&!D.photo2&&(0,e.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"200px",color:"#999",fontSize:"14px"},children:"\u6682\u65E0\u56FE\u7247"})]})]}),(0,e.jsx)(Fr.vY,{column:2,title:D==null?void 0:D.varietyName,request:x()(h()().mark(function u(){return h()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",{data:D||{}});case 1:case"end":return r.stop()}},u)})),params:{id:D==null?void 0:D.varietyName},columns:[{title:"\u54C1\u79CD\u540D\u79F0",dataIndex:"varietyName"},{title:"\u7C7B\u578B",dataIndex:"type"},{title:"\u5F15\u79CD\u5E74\u4EFD",dataIndex:"introductionYear"},{title:"\u6765\u6E90",dataIndex:"source"},{title:"\u5E38\u89C4\u79CD/\u7EAF\u5316",dataIndex:"breedingType",valueEnum:{regular:{text:"\u5E38\u89C4\u79CD"},pure:{text:"\u7EAF\u5316"}}},{title:"\u7559\u79CD\u7F16\u53F7",dataIndex:"seedNumber"},{title:"\u79CD\u690D\u5E74\u4EFD",dataIndex:"plantingYear"},{title:"\u6297\u6027",dataIndex:"resistance"},{title:"\u7ED3\u679C\u7279\u5F81",dataIndex:"fruitCharacteristics"},{title:"\u5F00\u82B1\u671F/\u679C\u5B9E\u53D1\u80B2\u671F",dataIndex:"floweringPeriod"},{title:"\u7559\u679C\u4E2A\u6570",dataIndex:"fruitCount"},{title:"\u4EA7\u91CF",dataIndex:"yield"},{title:"\u679C\u578B",dataIndex:"fruitShape"},{title:"\u76AE\u8272",dataIndex:"skinColor"},{title:"\u8089\u8272",dataIndex:"fleshColor"},{title:"\u5355\u679C\u91CD",dataIndex:"singleFruitWeight",render:function(a){return"".concat(a,"g")}},{title:"\u8089\u539A",dataIndex:"fleshThickness",render:function(a){return"".concat(a,"mm")}},{title:"\u7CD6\u5EA6",dataIndex:"sugarContent",render:function(a){return"".concat(a,"\xB0Brix")}},{title:"\u8D28\u5730",dataIndex:"texture"},{title:"\u603B\u4F53\u53E3\u611F",dataIndex:"overallTaste"},{title:"\u914D\u5408\u529B",dataIndex:"combiningAbility"},{title:"\u6742\u4EA4\u60C5\u51B5",dataIndex:"hybridizationList",render:function(a,r){var s=Array.isArray(r.hybridizationList)?r.hybridizationList:[];return s.length===0?"-":(0,e.jsx)("div",{children:s.map(function(t){return(0,e.jsx)("div",{style:{marginBottom:4},children:t.hybridization},t.id)})})}}]})]})}),(0,e.jsxs)(ae.Z,{title:(0,e.jsx)("div",{style:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px",margin:"-20px -24px 20px"},children:(0,e.jsx)("span",{style:{fontSize:"18px",fontWeight:500},children:"\u5BFC\u5165Excel"})}),open:Rr,onOk:function(){pe(!1)},onCancel:function(){pe(!1)},confirmLoading:ne,width:600,styles:{body:{padding:"24px"}},children:[(0,e.jsx)("div",{style:{background:"#fafafa",padding:"24px",borderRadius:"8px",marginBottom:"24px"},children:(0,e.jsx)(me.Z,{accept:".xlsx,.xls",showUploadList:!1,beforeUpload:function(a){var r=new FormData;return r.append("file",a),Ia(r),!1},children:(0,e.jsx)(C.ZP,{icon:(0,e.jsx)(we.Z,{}),loading:ne,disabled:ne,children:ne?"\u4E0A\u4F20\u4E2D...":"\u5BFC\u5165Excel"})})}),(0,e.jsxs)("div",{style:{background:"#f6ffed",padding:"16px",borderRadius:"8px",border:"1px solid #b7eb8f"},children:[(0,e.jsx)("h4",{style:{color:"#52c41a",marginTop:0},children:"\u6CE8\u610F\u4E8B\u9879\uFF1A"}),(0,e.jsxs)("ul",{style:{color:"#666",marginBottom:0},children:[(0,e.jsx)("li",{children:"\u8BF7\u4F7F\u7528\u6807\u51C6Excel\u6A21\u677F\u8FDB\u884C\u5BFC\u5165"}),(0,e.jsx)("li",{children:"Excel\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC710MB"}),(0,e.jsx)("li",{children:"\u8868\u683C\u4E2D\u7684\u5FC5\u586B\u5B57\u6BB5\u4E0D\u80FD\u4E3A\u7A7A"}),(0,e.jsx)("li",{children:"\u65E5\u671F\u683C\u5F0F\u8BF7\u4F7F\u7528YYYY-MM-DD\u683C\u5F0F"})]})]}),(0,e.jsx)("div",{style:{marginTop:16,textAlign:"right"},children:(0,e.jsx)(C.ZP,{type:"primary",onClick:function(){window.open("https://breed-1258140596.cos.ap-shanghai.myqcloud.com/Breeding%20Platform/%E7%94%9C%E7%93%9C%E7%BA%AF%E7%B3%BB%E7%A7%8D%E8%B4%A8%E8%B5%84%E6%BA%90%E6%80%BB%E8%A1%A8-1.xlsx")},children:"\u4E0B\u8F7DExcel\u6A21\u677F"})})]}),(0,e.jsx)(ae.Z,{title:(0,e.jsx)("div",{style:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px",margin:"-20px -24px 20px"},children:(0,e.jsx)("span",{style:{fontSize:"18px",fontWeight:500},children:"\u9009\u62E9\u6742\u4EA4\u54C1\u79CD"})}),open:Mr,onCancel:function(){return he(!1)},width:1200,styles:{body:{padding:"24px",maxHeight:"80vh",overflow:"auto"}},footer:[(0,e.jsx)(C.ZP,{onClick:function(){return he(!1)},children:"\u5173\u95ED"},"cancel"),(0,e.jsx)(C.ZP,{type:"primary",icon:(0,e.jsx)(je.Z,{}),onClick:ka,children:"\u5BFC\u51FA\u914D\u7EC4\u8868"},"export")],children:(0,e.jsxs)(re.Z,{direction:"vertical",style:{width:"100%"},size:"large",children:[(0,e.jsx)("div",{style:{background:"#f6ffed",padding:"16px",borderRadius:"8px",border:"1px solid #b7eb8f"},children:(0,e.jsxs)("h3",{style:{margin:"0",color:"#52c41a"},children:["\u5F53\u524D\u54C1\u79CD\uFF1A",v==null?void 0:v.varietyName]})}),(0,e.jsxs)("div",{style:{background:"#fff",borderRadius:"8px",padding:"16px"},children:[(0,e.jsx)("h3",{style:{margin:"0 0 16px",color:"#1890ff"},children:"\u5DF2\u914D\u6742\u4EA4\u54C1\u79CD"}),(0,e.jsx)(W.Z,{columns:[{title:"\u7F16\u53F7",dataIndex:"id"},{title:"\u6BCD\u672C\u7F16\u53F7",dataIndex:"femaleNumber"},{title:"\u7236\u672C\u7F16\u53F7",dataIndex:"maleNumber"},{title:"\u6BCD\u672C\u540D\u79F0",dataIndex:"femaleName"},{title:"\u7236\u672C\u540D\u79F0",dataIndex:"maleName"},{title:"\u6742\u4EA4\u7EC4\u5408",dataIndex:"hybridization"},{title:"\u914D\u7EC4\u65E5\u671F",dataIndex:"date"},{title:"\u64CD\u4F5C",dataIndex:"operation",render:function(a,r){return(0,e.jsxs)(re.Z,{children:[(0,e.jsx)(C.ZP,{size:"small",onClick:x()(h()().mark(function s(){var t,n;return h()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,fetch("/api/seed/hybridizationDelete?sowingnumbger=".concat(r.id),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(U)}});case 3:return t=i.sent,i.next=6,t.json();case 6:if(n=i.sent,!(n.msg||n.code===200)){i.next=16;break}return p.ZP.success("\u5DF2\u9000\u56DE\u8BE5\u914D\u7EC4"),G(),i.next=12,ur();case 12:return i.next=14,M(!0);case 14:i.next=17;break;case 16:p.ZP.error((n==null?void 0:n.msg)||"\u9000\u56DE\u5931\u8D25");case 17:i.next=22;break;case 19:i.prev=19,i.t0=i.catch(0),p.ZP.error("\u9000\u56DE\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 22:case"end":return i.stop()}},s,null,[[0,19]])})),children:"\u9000\u56DE"}),(0,e.jsx)(C.ZP,{size:"small",onClick:function(){var t=r.id;Wr("/germplasm/hybrid-record?sowingNumber=".concat(encodeURIComponent(t)))},children:"\u67E5\u770B\u6742\u4EA4\u6027\u72B6"})]})}}],dataSource:Array.isArray(v==null?void 0:v.hybridizationList)?v.hybridizationList:[],rowKey:"id",pagination:{pageSize:na,showSizeChanger:!0,pageSizeOptions:["5","10","20","50"],showQuickJumper:!0,showTotal:function(a){return"\u5171 ".concat(a," \u6761")},onChange:function(a,r){return Ge(r)},onShowSizeChange:function(a,r){return Ge(r)}},style:{marginBottom:"24px"}})]}),(0,e.jsxs)("div",{style:{background:"#fff",borderRadius:"8px",padding:"16px"},children:[(0,e.jsx)("h3",{style:{margin:"0 0 16px",color:"#1890ff"},children:"\u53EF\u9009\u6742\u4EA4\u54C1\u79CD"}),(0,e.jsx)(W.Z,{columns:[{title:"\u54C1\u79CD\u540D\u79F0",dataIndex:"varietyName"},{title:"\u7559\u79CD\u7F16\u53F7",dataIndex:"seedNumber"},{title:"\u7C7B\u578B",dataIndex:"type"},{title:"\u64CD\u4F5C",render:function(a,r){return(0,e.jsx)(C.ZP,{type:"primary",onClick:function(){return Ba(r)},disabled:r.key===(v==null?void 0:v.key),size:"middle",children:"\u9009\u62E9\u4F5C\u4E3A\u914D\u7EC4"})}}],dataSource:be.filter(function(u){if(u.key===(v==null?void 0:v.key))return!1;var a=Array.isArray(v==null?void 0:v.hybridizationList)?v.hybridizationList.some(function(r){return r.femaleName===(v==null?void 0:v.varietyName)&&r.maleName===u.varietyName||r.maleName===(v==null?void 0:v.varietyName)&&r.femaleName===u.varietyName}):!1;return!a}),rowKey:"key",pagination:{pageSize:ua,showSizeChanger:!0,pageSizeOptions:["5","10","20","50"],showQuickJumper:!0,showTotal:function(a){return"\u5171 ".concat(a," \u6761")},onChange:function(a,r){return Xe(r)},onShowSizeChange:function(a,r){return Xe(r)}},style:{marginBottom:"24px"}})]}),(0,e.jsxs)("div",{style:{background:"#fff",borderRadius:"8px",padding:"16px"},children:[(0,e.jsx)("h3",{style:{margin:"0 0 16px",color:"#1890ff"},children:"\u6742\u4EA4\u914D\u7EC4\u8868"}),(0,e.jsx)(W.Z,{columns:[{title:"\u7F16\u53F7",dataIndex:"id"},{title:"\u6BCD\u672C\u7F16\u53F7",dataIndex:"femaleNumber"},{title:"\u7236\u672C\u7F16\u53F7",dataIndex:"maleNumber"},{title:"\u6BCD\u672C\u540D\u79F0",dataIndex:"femaleName"},{title:"\u7236\u672C\u540D\u79F0",dataIndex:"maleName"},{title:"\u6742\u4EA4\u7EC4\u5408",dataIndex:"hybridization"},{title:"\u914D\u7EC4\u65E5\u671F",dataIndex:"date"}],dataSource:Array.isArray(v==null?void 0:v.hybridizationList)?v.hybridizationList:[],rowKey:"id",pagination:{pageSize:sa,showSizeChanger:!0,pageSizeOptions:["5","10","20","50"],showQuickJumper:!0,showTotal:function(a){return"\u5171 ".concat(a," \u6761")},onChange:function(a,r){return _e(r)},onShowSizeChange:function(a,r){return _e(r)}}})]})]})}),(0,e.jsxs)(ae.Z,{title:(0,e.jsx)("div",{style:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px",margin:"-20px -24px 20px"},children:(0,e.jsx)("span",{style:{fontSize:"18px",fontWeight:500},children:"\u79CD\u8D28\u8D44\u6E90\u64AD\u79CD\u8868"})}),open:Kr,onCancel:function(){fe(!1),F.resetFields()},footer:ba,width:900,styles:{body:{padding:"24px",maxHeight:"80vh",overflow:"auto"}},children:[(0,e.jsx)("div",{style:{background:"#fafafa",padding:"24px",borderRadius:"8px",marginBottom:"24px"},children:(0,e.jsxs)(A.Z,{form:F,layout:"vertical",onFinish:ir,children:[(0,e.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[(0,e.jsx)(A.Z.Item,{label:"\u79CD\u690D\u7F16\u53F7",name:"code",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u79CD\u690D\u7F16\u53F7"}],children:(0,e.jsx)(H.Z,{size:"large",placeholder:"\u8BF7\u8F93\u5165\u79CD\u690D\u7F16\u53F7"})}),(0,e.jsx)(A.Z.Item,{label:"\u7F16\u53F7",name:"seedNumber",children:(0,e.jsx)(H.Z,{size:"large",disabled:!0})}),(0,e.jsx)(A.Z.Item,{label:"\u54C1\u79CD\u540D\u79F0",name:"varietyName",children:(0,e.jsx)(H.Z,{size:"large",disabled:!0})}),(0,e.jsx)(A.Z.Item,{label:"\u64AD\u79CD\u6570\u91CF",name:"sowingCount",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u64AD\u79CD\u6570\u91CF"}],children:(0,e.jsx)(de.Z,{size:"large",min:1,precision:0,style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u64AD\u79CD\u6570\u91CF"})}),(0,e.jsx)(A.Z.Item,{label:"\u8BA1\u5212\u7F16\u53F7",name:"planNumber",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BA1\u5212\u7F16\u53F7"}],children:(0,e.jsx)(H.Z,{size:"large",placeholder:"\u8BF7\u8F93\u5165\u8BA1\u5212\u7F16\u53F7"})})]}),(0,e.jsx)(A.Z.Item,{style:{marginTop:"24px",textAlign:"right"},children:(0,e.jsx)(C.ZP,{type:"primary",htmlType:"submit",onClick:function(){F.validateFields().then(function(a){ir(a)}).catch(function(a){console.log("Validate Failed:",a)})},children:"\u6DFB\u52A0\u5230\u64AD\u79CD\u8868"})})]})}),(0,e.jsxs)("div",{style:{background:"#fff",borderRadius:"8px",padding:"16px"},children:[(0,e.jsx)("h3",{style:{margin:"0 0 16px",color:"#1890ff"},children:"\u64AD\u79CD\u8BB0\u5F55\u5217\u8868"}),(0,e.jsx)(A.Z,{form:F,component:!1,children:(0,e.jsx)(W.Z,{components:{body:{cell:va}},bordered:!0,dataSource:He,columns:Pa,rowKey:"id",pagination:!1,scroll:{y:300}})})]})]}),(0,e.jsxs)(ae.Z,{title:(0,e.jsx)("div",{style:{borderBottom:"1px solid #f0f0f0",padding:"16px 24px",margin:"-20px -24px 20px"},children:(0,e.jsx)("span",{style:{fontSize:"18px",fontWeight:500},children:"\u6279\u91CF\u64AD\u79CD"})}),open:_r,onCancel:function(){se(!1),V.resetFields()},width:600,styles:{body:{padding:"24px"}},footer:[(0,e.jsx)(C.ZP,{onClick:function(){se(!1),V.resetFields()},children:"\u53D6\u6D88"},"cancel"),(0,e.jsx)(C.ZP,{type:"primary",onClick:function(){V.validateFields().then(function(a){sr(a)}).catch(function(a){console.log("Validate Failed:",a)})},children:"\u786E\u8BA4\u6279\u91CF\u64AD\u79CD"},"submit")],children:[(0,e.jsxs)("div",{style:{background:"#fafafa",padding:"16px",borderRadius:"8px",marginBottom:"24px"},children:[(0,e.jsxs)("h4",{style:{margin:"0 0 12px",color:"#1890ff"},children:["\u5DF2\u9009\u62E9\u7684\u54C1\u79CD (",I.length," \u4E2A)"]}),(0,e.jsx)("div",{style:{maxHeight:"200px",overflowY:"auto"},children:I.map(function(u){return(0,e.jsxs)("div",{style:{padding:"8px 12px",margin:"4px 0",background:"#fff",borderRadius:"4px",border:"1px solid #e8e8e8"},children:[(0,e.jsx)("span",{style:{fontWeight:500},children:u.varietyName}),(0,e.jsxs)("span",{style:{color:"#666",marginLeft:"8px"},children:["(",u.seedNumber,")"]})]},u.key)})})]}),(0,e.jsxs)(A.Z,{form:V,layout:"vertical",onFinish:sr,children:[(0,e.jsx)(A.Z.Item,{label:"\u8BA1\u5212\u7F16\u53F7",name:"planNumber",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BA1\u5212\u7F16\u53F7"}],extra:"\u7CFB\u7EDF\u5C06\u81EA\u52A8\u4E3A\u6BCF\u4E2A\u54C1\u79CD\u751F\u6210\u5BF9\u5E94\u7684\u79CD\u690D\u7F16\u53F7",children:(0,e.jsx)(H.Z,{size:"large",placeholder:"\u8BF7\u8F93\u5165\u8BA1\u5212\u7F16\u53F7"})}),(0,e.jsx)(A.Z.Item,{label:"\u9ED8\u8BA4\u64AD\u79CD\u6570\u91CF",name:"defaultSowingCount",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u64AD\u79CD\u6570\u91CF"}],extra:"\u6240\u6709\u54C1\u79CD\u5C06\u4F7F\u7528\u76F8\u540C\u7684\u64AD\u79CD\u6570\u91CF",children:(0,e.jsx)(de.Z,{size:"large",min:1,precision:0,style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u64AD\u79CD\u6570\u91CF"})}),(0,e.jsxs)("div",{style:{background:"#f6ffed",padding:"16px",borderRadius:"8px",border:"1px solid #b7eb8f"},children:[(0,e.jsx)("h4",{style:{color:"#52c41a",marginTop:0},children:"\u6279\u91CF\u64AD\u79CD\u8BF4\u660E\uFF1A"}),(0,e.jsxs)("ul",{style:{color:"#666",marginBottom:0},children:[(0,e.jsx)("li",{children:"\u7CFB\u7EDF\u5C06\u4E3A\u6BCF\u4E2A\u9009\u4E2D\u7684\u54C1\u79CD\u521B\u5EFA\u4E00\u6761\u64AD\u79CD\u8BB0\u5F55"}),(0,e.jsx)("li",{children:"\u79CD\u690D\u7F16\u53F7\u5C06\u81EA\u52A8\u751F\u6210\u4E3A\uFF1A\u8BA1\u5212\u7F16\u53F7-001\u3001\u8BA1\u5212\u7F16\u53F7-002..."}),(0,e.jsx)("li",{children:"\u64AD\u79CD\u8BB0\u5F55\u5C06\u540C\u65F6\u4FDD\u5B58\u5230\u672C\u5730\u548C\u63D0\u4EA4\u5230\u670D\u52A1\u5668"}),(0,e.jsx)("li",{children:"\u6240\u6709\u54C1\u79CD\u5C06\u4F7F\u7528\u76F8\u540C\u7684\u64AD\u79CD\u6570\u91CF\u548C\u8BA1\u5212\u7F16\u53F7"}),(0,e.jsx)("li",{children:"\u5982\u679C\u670D\u52A1\u5668\u63D0\u4EA4\u5931\u8D25\uFF0C\u8BB0\u5F55\u4ECD\u4F1A\u4FDD\u5B58\u5728\u672C\u5730\uFF0C\u53EF\u7A0D\u540E\u624B\u52A8\u63D0\u4EA4"})]})]})]})]})]})},Tr=Br}}]);
